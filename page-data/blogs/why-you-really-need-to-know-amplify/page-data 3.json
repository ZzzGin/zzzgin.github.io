{
    "componentChunkName": "component---src-templates-md-template-js",
    "path": "/blogs/why-you-really-need-to-know-amplify",
    "result": {"data":{"markdownRemark":{"html":"<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%E4%BD%95%E8%AE%B8%E4%BA%BA%E4%B9%9F\">何许人也</a></li>\n<li><a href=\"#%E7%AE%A1%E4%B8%AD%E7%AA%A5%E8%B1%B9\">管中窥豹</a></li>\n<li><a href=\"#%E7%A9%B7%E5%8D%83%E9%87%8C%E7%9B%AE\">穷千里目</a></li>\n<li><a href=\"#%E6%B1%82%E8%81%8C%E5%BB%BA%E8%AE%AE\">求职建议</a></li>\n<li><a href=\"#drafting\">Drafting</a></li>\n<li><a href=\"#more-readings\">More readings</a></li>\n</ul>\n</div>\n<h2 id=\"何许人也\" style=\"position:relative;\"><a href=\"#%E4%BD%95%E8%AE%B8%E4%BA%BA%E4%B9%9F\" aria-label=\"何许人也 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>何许人也</h2>\n<blockquote>\n<p>So what does the future look like? - <strong>ALL THE CODE YOU EVER WRITE IS BUSINESS LOGIC.</strong></p>\n<p><em>-- Amazon VP, CTO, Werner Vogels</em></p>\n</blockquote>\n<p>我总持有一个观点，一个健康的环境下，软件工程师不应该担心因为技术迭代而导致自己被淘汰。这不是什么“计算机从业者应该持续不断地学习”这种成词滥调，而是基于一个不言自明的事实：“新技术取代旧技术永远是因为新技术从根本上更易理解、更易上手”。“旧技术”的复杂性往往由于其更贴近“本源”。而有了对于“本源”知识的理解，新技术的上手大部分也就是个Udemy上4个小时教程的事情。什么样的技术社区会去刻意追求复杂呢？或许没有，但我听闻一种断言是，在北美，律师、医生通过复杂性来提高入门门槛稳固体系。且不论这种断言的合理性，但软件工程，绝不属于这个行列。</p>\n<p>而<a href=\"https://aws.amazon.com/amplify/\">AWS Amplify</a>则是这个观点的绝佳例证。AWS的<a href=\"https://aws.amazon.com/serverless/\">Serverless（无服务）</a>理念推行着<a href=\"https://betterprogramming.pub/all-the-code-you-will-ever-write-is-business-logic-2dc0acf47cef\">“业务逻辑”才是第一生产力的观点</a>，即作为AWS的使用者，你只需要写和你自己的业务相关的代码（比如网站页面，怎么支付订单）就可以了，不需要参与背后服务器的配置和维护。为此，它创造出了一大溜以“技术需求”为核心的服务。比如（嘿，不要被下面的专有名词吓到，这是写作手法，先抑后扬、故意的：），我想让“key-value”形式的数据能有更多读取模式，我可以选择<a href=\"https://aws.amazon.com/dynamodb/\">DynamoDB</a>；我想处理流数据，可以选择<a href=\"https://aws.amazon.com/kinesis/data-firehose/\">Kinesis</a>；我需要一个消息队列，<a href=\"https://aws.amazon.com/sqs/\">SQS</a>是上乘之选。这种设计极大得提升了技术的复用性，一个<strong>功能</strong>，只需要合理组合、配置这些组件就可以了！太方便了！但这到极限了吗？Amplify的出现带领“业务至上”这一理念迈进了一步。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 599px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a1d1a970e27430302f0d92ac6a39372c/43142/280314452b365293a02970355901d96ae00f193b5725073f50eed1cae4e6895c.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.551020408163264%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0ElEQVQY001PSQrCAAzs43yAv/IBPsW7xxYPUrrajUJduqFd6EJLbUYSUBwIk5mELAq9DqApAeP9XtA0DcZxxDAMkmdZJjXW8zxjXVcsyyIea/bzPEdd1+IpdN6CrjsR6eMOVVVhGIawrusIwxBEBMdxYFkWfN8XDoJA+pi513VdGazQZQ86bYDuhNvjCe/iStG2bZRlCc/zUFUV4jiWYUmSoCgKaJomC6MokkjTFKZpQqFMBYojqNXxBV/0ZX7rH/wyo21bTNP087uuQ9/3+AAc8SjLYi56TQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Amplify\"\n        title=\"Amplify\"\n        src=\"/static/a1d1a970e27430302f0d92ac6a39372c/43142/280314452b365293a02970355901d96ae00f193b5725073f50eed1cae4e6895c.png\"\n        srcset=\"/static/a1d1a970e27430302f0d92ac6a39372c/86a2e/280314452b365293a02970355901d96ae00f193b5725073f50eed1cae4e6895c.png 245w,\n/static/a1d1a970e27430302f0d92ac6a39372c/41d3c/280314452b365293a02970355901d96ae00f193b5725073f50eed1cae4e6895c.png 490w,\n/static/a1d1a970e27430302f0d92ac6a39372c/43142/280314452b365293a02970355901d96ae00f193b5725073f50eed1cae4e6895c.png 599w\"\n        sizes=\"(max-width: 599px) 100vw, 599px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Amplify的使用者，关注“功能需求”，而非“技术需求”。我想存订单信息，里头要有订单编码、商品编码等，怎么存、存在哪儿，我不关心；我的网站需要用户登陆，怎么实现，我不关心；我要存商品图片，用什么技术我不关心，我只是想要存，然后取，存得放心，取得舒心……这些“功能需求”，对于Amplify，一行或者几行代码就可以实现！</p>\n<p>怎么做到的呢？其实没什么魔法。简单讲，Amplify作为一个框架在背后帮你创建、组合并配置了那些技术组件，从而来实现常见的功能需求。其核心理念依然是增加组件的<strong>复用性</strong>，只不过此时，复用的是<strong>功能</strong>，而非技术。那么代价是什么呢？灵活性。有一定软件工程经验的人一定深有体会，“方便”和“灵活”永远是相斥的，使用“方便”的技术，就会时不时受到框架的限制；想要突破框架的限制，就必须拥抱复杂。</p>\n<table>\n<thead>\n<tr>\n<th>方便</th>\n<th>灵活</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>使用<a href=\"https://medium.com/\">medium</a>写技术博客</td>\n<td>自己搭建博客网站</td>\n</tr>\n<tr>\n<td>一个方法500行，想改哪里改哪里</td>\n<td>合理抽象逻辑，增加代码可扩展性</td>\n</tr>\n<tr>\n<td>看Udemy学习新技术</td>\n<td>看官方文档学习新技术</td>\n</tr>\n<tr>\n<td>订购家具</td>\n<td>订做家具</td>\n</tr>\n<tr>\n<td>买食材包，下锅热炒即刻上桌</td>\n<td>思考菜单，购买食材，洗切后下锅</td>\n</tr>\n<tr>\n<td>...</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<p>这一章，将是一次“强势安利”，我将从不同角度介绍Amplify作为一种技术，为什么值得初入软件工程的新手了解和尝试。而作为这一节的总结，正如标题所说，Amplify是AWS这个“大型手游”的新手大礼包。相当合适的学习成本，你就能上手一众AWS的明星服务。从新手的角度来说，”大礼包“功能强大，能迅速拉开与不充值玩家实力的差距；而对于老玩家，”大礼包“也物超所值，你会发现总有一些小东西，用Amplify实现能做得很漂亮，很方便。而怎么拉开差距，怎么漂亮，怎么方便，且跟随我一齐探索。</p>\n<h2 id=\"管中窥豹\" style=\"position:relative;\"><a href=\"#%E7%AE%A1%E4%B8%AD%E7%AA%A5%E8%B1%B9\" aria-label=\"管中窥豹 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>管中窥豹</h2>\n<p>多说无益，show me the code。</p>\n<p>我们将用30分钟完成一个网页应用——<a href=\"https://en.wikipedia.org/wiki/Diode\">Diode</a>，向默默地为这个世界的运转做贡献的二极管们致敬。以下是这个网页应用的需求列表：</p>\n<ol>\n<li>每个人都可以当二极管，一人一号，互不干扰；</li>\n<li>二极管有且仅有两个状态，on/off，随时切换；</li>\n<li>同个账号的二极管在多设备上实时同步，多屏协同；</li>\n<li>部署至因特网，面向全球二极管，有足够的扩容性；</li>\n<li>快捷流水线部署，push完代码快速看到结果，做最敏捷的二极管；</li>\n<li>自定义域名，SSL证书签名，成为互相信任的二极管。</li>\n</ol>\n<p>这个是最后的结果：<a href=\"https://diode.zzzgin.com/\">diode.zzzgin.com</a>。源码：<a href=\"https://github.com/ZzzGin/diode\">github.com/ZzzGin/diode</a>。</p>\n<p><strong>Demo步骤：</strong></p>\n<ol>\n<li>前往：<a href=\"https://diode.zzzgin.com/\">https://diode.zzzgin.com/</a>;</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 497px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d1f96b1de9611124cc169690b432e725/15d25/3f4de8a176ffb8dd651950b5cdbf5580f60b8df2fb21e70905fee7c75d67ac85.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.51020408163265%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBUlEQVQ4y62TvW7UQBDHXQApEK+DxDtQk5AniGhpIYKeCpGQmiYXaEBCJKFJBS1CIKI7gQiQnJOz7872ru39/qMZ37cOQcFIP814ZnZ2drwbpbnAr0GG00HOnKRD5md/6iMyISFlibwokOU5srwY2aQFx8iOlFKYlU6a4UM3QWnsnN9aC2ctznsJPn1p47jzFZ1v3/H5uIO0P0DwHoUQiKq65gUhBMZ5D+v85HuM955xzsFYyxsQZJOPcsqqQlTXCt4HaG1greMgJWpj5jDGTrFTOFcb3kwpPS7oeR5xHDNSyknXy6Txh0l83ESt1LQgadqBnGSz/hujPFpHp5t0SHPrD4c47/WQpH0IWUJbC6UN1Myx1QK1NihkifgiaeJUsKpHf9kaGCngqhIIHv8swSOomubQHDlYi3YyxFrrEOvP3zJrrQOs7u7j1u4+brcOcOfVETZeHmF975B9qzOQ7+az13jTPuHiEbzDux8xLt/fwpUZVja32LeyuY0bOy9wfXsP1x7u4NK9Jxwb51198BTR3Ud4/P4jN8wzNN4jLuSIcqJ7smJOc4FuIdlOZIVYlDO5Jc5yicrYhRkuEUoSykA7xy+HbKHNH/OpuYhutw8Blu7SAokscZYJpNRVLtHNBS5EcwOc83O59Dial6IUqMt6CVprGK2hVaPHUGzZmrKqEeE/y2/xpWIucYn6DgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"picture 21\"\n        title=\"picture 21\"\n        src=\"/static/d1f96b1de9611124cc169690b432e725/15d25/3f4de8a176ffb8dd651950b5cdbf5580f60b8df2fb21e70905fee7c75d67ac85.png\"\n        srcset=\"/static/d1f96b1de9611124cc169690b432e725/86a2e/3f4de8a176ffb8dd651950b5cdbf5580f60b8df2fb21e70905fee7c75d67ac85.png 245w,\n/static/d1f96b1de9611124cc169690b432e725/41d3c/3f4de8a176ffb8dd651950b5cdbf5580f60b8df2fb21e70905fee7c75d67ac85.png 490w,\n/static/d1f96b1de9611124cc169690b432e725/15d25/3f4de8a176ffb8dd651950b5cdbf5580f60b8df2fb21e70905fee7c75d67ac85.png 497w\"\n        sizes=\"(max-width: 497px) 100vw, 497px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol start=\"2\">\n<li>创建账号，可使用这类<a href=\"https://10minutemail.com/\">10分钟临时邮箱</a>;</li>\n<li>登陆成为二极管！</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 495px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/38a1fb958a6ff64e881b20f4abede77c/a4d88/203ea3bf8b77c7bfce1267a79959821fd4b4f725d1de0b2583ca217161d2044c.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.48979591836735%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABp0lEQVQ4y51UuaoCQRDcjxfMBBPBYDNDIwNBxfsAFQPxWA1UVPC+D/CuRzWMb9Vd9b2GZWZ6pmuqu3pHwxu73W4P6+v1evc97ynTPoERpNFooNlsvuxZgWp2QBzV3Ov1wu12Y7VaYbFYvOx/ZGg+PBqNEI/Hsd/v4fF44HK5xH+5XL5L2Zzq+XzGeDwWVsfjEeFwGP1+X/wfU1as1KHdbgdd15HNZmXd7XbR6/VwOBxQLBYfRDIDa881U+vpdCpgnU4HgUAAhmGIfz6fI51OWwJy1OyoM81MJnMPzOVyiEQiaLVaKBQKLymrucbDtHa7jVAohFgshmQyCb/fj2Aw+CDAZrOBw+GA0+mUy6LRqMRUq9VfhgqZQSw8a8RLhsOhACvjhQRIpVJIJBLi41nGmEWyTXk2myGfz2O73Yq6ZE6A9Xp9F8oyZTtRqLLP5xNWFEgZ0y6VSu9FserDyWQi6XHkR5UpVKVSkXL8+dcjEzLjNxgMpA+Xy6XUkntfA1rVxirw69fGXMtarSZKs5Hr9TrK5bKsqey/Xhu2w+l0kpZSbcXx3fP1A1YUGNT+a+g/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"picture 22\"\n        title=\"picture 22\"\n        src=\"/static/38a1fb958a6ff64e881b20f4abede77c/a4d88/203ea3bf8b77c7bfce1267a79959821fd4b4f725d1de0b2583ca217161d2044c.png\"\n        srcset=\"/static/38a1fb958a6ff64e881b20f4abede77c/86a2e/203ea3bf8b77c7bfce1267a79959821fd4b4f725d1de0b2583ca217161d2044c.png 245w,\n/static/38a1fb958a6ff64e881b20f4abede77c/41d3c/203ea3bf8b77c7bfce1267a79959821fd4b4f725d1de0b2583ca217161d2044c.png 490w,\n/static/38a1fb958a6ff64e881b20f4abede77c/a4d88/203ea3bf8b77c7bfce1267a79959821fd4b4f725d1de0b2583ca217161d2044c.png 495w\"\n        sizes=\"(max-width: 495px) 100vw, 495px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol start=\"4\">\n<li>点击页面，切换二极管通断；</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 497px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/667df2bd2086bd26553bf13aabd7721a/15d25/d2b00052a6a425d8d2ca8ecbd2194a26513870f15b825ebcaf53d378a91a55ea.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.08163265306123%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABeklEQVQ4y6WUOa+CUBCFwQWXWCgqosYlxMQQC5eIcV8SQU3srGgNhY2Fnf768zKTSN5ihPssbnGHud89wzkgSZKEsEuW5TB9wZB2u80r5MXBTZ7n4Xq9IpvNQlXVz4CapmG1WiGZTOJyueB2u3E9EomIAWnUaDSKQqHAyhRFwXa7RbVa5bqwwnQ6jfP5jMlkwvtarcaweDyO4XAoDszn8wyr1+s4Ho++KblcDrPZ7J3rr4F0cDqd+gfH4zGP3Gw23yt83mIYBhzHwXq9xmKxwOl0wm63+2FAJpPB4/HA/X7nyzabDWzbRqfT+auQDtH7oUX7UqmE+XzuN5IyAlBtuVxyjYyi/l8mvZZOeaPRyBwalWCJRIJVPo0SMiWVSsF1XQZ9DzPV+/2+uCm6rrOycrmMSqWCbreLYrEIy7I4PsIKKcwEInCj0UCr1eIomabJzz76lkP+ZYKBg8EAh8MB+/0evV4Po9GIQ07f9b+AFIdYLMYKKVYUkyC1X6zthMM5W1XSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"picture 23\"\n        title=\"picture 23\"\n        src=\"/static/667df2bd2086bd26553bf13aabd7721a/15d25/d2b00052a6a425d8d2ca8ecbd2194a26513870f15b825ebcaf53d378a91a55ea.png\"\n        srcset=\"/static/667df2bd2086bd26553bf13aabd7721a/86a2e/d2b00052a6a425d8d2ca8ecbd2194a26513870f15b825ebcaf53d378a91a55ea.png 245w,\n/static/667df2bd2086bd26553bf13aabd7721a/41d3c/d2b00052a6a425d8d2ca8ecbd2194a26513870f15b825ebcaf53d378a91a55ea.png 490w,\n/static/667df2bd2086bd26553bf13aabd7721a/15d25/d2b00052a6a425d8d2ca8ecbd2194a26513870f15b825ebcaf53d378a91a55ea.png 497w\"\n        sizes=\"(max-width: 497px) 100vw, 497px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol start=\"5\">\n<li>使用其他设备点击相同链接，同账号登陆，点击页面切换二极管通断，可以观察到多屏协同；</li>\n<li>点击“点此链接不当二极管”退出登陆，不当二极管。</li>\n</ol>\n<p><strong>暂停，我们想一想这个app背后的技术需求：</strong></p>\n<ol>\n<li>前端应用我们可以使用React框架实现。可能需要host在一台服务器上，如果未来流量增加，可能需要多台服务器并实现负载均衡。当然这里可以使用云服务提供商的存储服务，比如S3，然后用Cloudfront实现CDN加速；</li>\n<li>后端如果不知道一些技术，设计可能会比较复杂了。首先，这是一个实时的状态更新，websocket server要维护链接表，Oh no，如果流量上去了，怎么同步多服务器的链接表呢？其实这类数据同步可以使用AWS的AppSync，GCP的Firebase也有这种功能。</li>\n<li>用户还有登陆系统，关系数据库看起来绕不过去了。哦对不用，AWS有Cognito可以直接提供API来实现用户登陆、账号创建！用它！</li>\n<li>还要实现“CI/CD（持续集成/持续交付）”，还要搞个部署流水线？AWS CodeCommit和Pipeline得整上。要不就去Github找找插件。</li>\n<li>还要域名和证书？行吧，Route 53可以购买域名；AWS Certificate Manager可以解决证书。</li>\n</ol>\n<p><strong>设计齐活，开始整活儿！且慢，让我们看看，一个Amplify开发者怎么看待这个应用：</strong></p>\n<ol>\n<li>前端React写吧。</li>\n<li>需要用户登陆是吧，那要有一个Amplify Auth组件；</li>\n<li>多屏同步，说明需要个API来获取别的设备的更新，那要有一个Amplify API组件；</li>\n<li>要域名是吧，Route 53买一个域名，然后鼠标设置一下就行；</li>\n<li>什么？你问怎么保持链接主动更新别的设备？还有交付流水线？哦，前者API组件直接提供；后者Apmlify本来就有。</li>\n</ol>\n<p>从上面系统设计的角度来说，Amplify已经人如其名了。掌握了Amplify，我们思考实现的思路是“需要什么功能”-“对应什么Amplify提供的组件”。反之，我们的思路是“这个功能背后的技术需求”-“对应的技术”-“有没有技术陷阱，有没有更好的选项”。要知道，技术是有盲点的，如果你不知道某个技术，你还是要花时间和同事聊天、或者网上找资料去学。而Amplify，已经为你做好了技术选型，配置得当，并且文档就在那里，一个组件对应一个功能，你看与不看，它都在那里。</p>\n<p><strong>下面，是实现这个应用的全部步骤，笔者耗时半个小时。吹毛求疵一点，鉴于之前我提到“Amplify的设计目标是仅写业务逻辑”，我们来看看使用Amplify实现这个应用，要写多少行非业务代码。</strong></p>\n<p>（⚠️注意，以下步骤并不是设计给读者按照步骤操作的，仅是提供一个Amplify开发应用的步骤的概念。我在接下去的章节会介绍一些可行的学习路线。⚠️）</p>\n<ol>\n<li>\n<p>Github上新建一个空白项目，clone到本地；</p>\n</li>\n<li>\n<p><code class=\"language-text\">npx create-react-app .</code>创建一个React应用；<code class=\"language-text\">npm i -g @aws-amplify/cli</code>安装Amplify的CLI工具链（用于第三步）；</p>\n</li>\n<li>\n<p>使用Amplify命令行工具<code class=\"language-text\">amplify init</code>初始化，其间会问你一些问题，用方向键、回车键选择即可；</p>\n<ol>\n<li>“键入应用名称” - 默认diode，直接敲回车；</li>\n<li>“确认一下是否用上列默认选项？” - 默认Yes，回车；</li>\n<li>“你想如何链接到AWS账户？” - 默认“AWS profile”，回车（哦对，忘了说了，Amplify需要AWS账号）；</li>\n<li>然后Amplify就会根据你的选择在云上初始化你的App环境。</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 649px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/618c9e7273d85b070488ac05c86d32e5/7762d/4e21191167eeaa08f4ea1fcc5e993bb24e95cd3cbf0f188ca844eed527f8d705.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.18367346938776%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACoklEQVQ4y42Ty47jNhBF9QNZBwjgp162HpRkWxL1tmTZlt09mEmAJNt8QZZZ5OdPQHri9Mx0kCwuisUqXt5iFY2+txjPJt3R5nKZcfv0I6+//sn082/89Pv3/PLHd1w+OZwGSdMJZOERigUiWhGKJVH8QJwsCcIVRtsHFFVA3Ua0vaAbPLohpB8S0jZANBH7bEaUzAjEgiBcaKK/ESWLJ6kfLDGSzGInLQ61Q1Zv2JUWiVyj9oO9SZCaiHyOnyyxnTWOu9b2PaiYMY49VSXp+5a6lgjhY5pLLOsBW8Fe4zhr3M3qP2Ec+4p+qBnPHWkWEwoXz7cJQveJ5wH3Len6XRiX68DrhxvnS8/tfuZ+v9A0klzuyOWeNEt0ouP+O8kXhMPQME0jw6llPB95/TDRtAVVnesE05o/k/8PqdF1JY+yG9qu0GQKdSORxYGyyth61jcHHWXfucDoe0VU8vHjC5dLr5V2x4rT2OlLlFWESqllLzQcZ6nJnHdUG4dUaCWy2OumqLfL8kSvFYoy5ZBGpGn82E9jgiTAUaoV8VekRn+qmW7qDRtd+nU60R1LrU41SvkqlqsL04hdGrHdC9zYx/XtNx1fPeYwy3fk+YHDIdHzWBQ5uUwpikz7KiZlSrKLiIRPGIfYscBR8LfY9uox1J/n1Cg6D9n6lEef5hRRDR6y29KMgrILkN0G2XkkckV4+IEgniH2M6JU2TkiXSAOC8L94qEwjC0C8QaRiYgdfGHihyZhbOt1uHPY7De4oYWzneP6c203/pKtv2Ljfy55up15eZl4eZ24Xkeu08j9fuU0HjmfB+2P45Gub8n6jqzKadtSf9OqyvE8G9t5kOmS03xHUap5S59zp7uaJej3lTv8wGG7NfE9C8+zvvqW/3RZKfwLoij0JTIZUJwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"picture 13\"\n        title=\"picture 13\"\n        src=\"/static/618c9e7273d85b070488ac05c86d32e5/7762d/4e21191167eeaa08f4ea1fcc5e993bb24e95cd3cbf0f188ca844eed527f8d705.png\"\n        srcset=\"/static/618c9e7273d85b070488ac05c86d32e5/86a2e/4e21191167eeaa08f4ea1fcc5e993bb24e95cd3cbf0f188ca844eed527f8d705.png 245w,\n/static/618c9e7273d85b070488ac05c86d32e5/41d3c/4e21191167eeaa08f4ea1fcc5e993bb24e95cd3cbf0f188ca844eed527f8d705.png 490w,\n/static/618c9e7273d85b070488ac05c86d32e5/7762d/4e21191167eeaa08f4ea1fcc5e993bb24e95cd3cbf0f188ca844eed527f8d705.png 649w\"\n        sizes=\"(max-width: 649px) 100vw, 649px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>\n<p>稍等5分钟，传来“successfully”的消息。可以继续了。对，我们需要一个API，依然是用命令行输入，然后方向键选择：<code class=\"language-text\">amplify add api</code></p>\n<ol>\n<li>“想使用什么类型的API？” - GraphQl，因为这个支持实时同步；</li>\n<li>“API名称” - 默认diode，但是我觉得API是动词，应该用toggle；</li>\n<li>“如何认证你的API？” - 我是需要用户登陆的，那就Cognito吧；</li>\n<li>“你希望用户使用什么字段登陆呢？” - 默认是邮箱，也可以选用户名；</li>\n<li>“想设置高级选项吗？” - No；</li>\n<li>“除了Cognito还需要什么认证手段吗？” - No；</li>\n<li>“我们提供了一系列数据schema的模版，挑一个吧” - 默认；</li>\n<li>“想现在就定义数据吗？” - 好；</li>\n<li>自动弹出新创建好的<code class=\"language-text\">schema.graphql</code>文件供我定义数据。</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 980px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1ba93982bb4513be5ea79cb90bb309fc/891d5/91d11429059f4b553e0d0404f89fea059a108e1c3298e9427cf3a859d8d61ed2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.163265306122454%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnElEQVQoz2XS246bMBSFYd6jh0DI2ByMsQ2YM2lVaVR1plVvRmrf/0H+Ckhm0snFp2VL1tbetoOnp4HH5z/8+PuNx1+G+bxgWocu001uFaJIkGn8v+S4pZDRdu7553deXn4TLOeB5WtHP3i6rmGcG2zrKL3FuALlCoRVyDJDroWvlNgzOyFESHT8SBh9IKjqjLrJ8J3Ct4rGKwqdUuiEVElELpD5A1JGd8TF2m2SxptgHgzzZJlHx3lyNIMlt+nrSA9JjFhTRhvxrtDqdh30s6bpC2qvqdtd1WhcVWBMhrMKrZPXO107V4UkX7u/KSzkpeBynvhynujGFtfVOG+xjcG1DtuUaO9Iy4w0i8ny05ZXMonuBG0X0bQxpjpi6iOlizem2rOsTmh3RJcHchWiVLjlLto6uxXUw4Fq1YdYf0DbA9p93tk1P23rwhzIdUhWRG/WfRlumV8y6JaEdsloekXd5ZgqQ+mEonxzvT+Zrh2FiGS37t8LpqWiGyy+s/RDzTS3DKNnHD2+dfR9jasuj2QVpcku3yq9G3cd+R+F6jAmXLGnmgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"picture 15\"\n        title=\"picture 15\"\n        src=\"/static/1ba93982bb4513be5ea79cb90bb309fc/d30ee/91d11429059f4b553e0d0404f89fea059a108e1c3298e9427cf3a859d8d61ed2.png\"\n        srcset=\"/static/1ba93982bb4513be5ea79cb90bb309fc/86a2e/91d11429059f4b553e0d0404f89fea059a108e1c3298e9427cf3a859d8d61ed2.png 245w,\n/static/1ba93982bb4513be5ea79cb90bb309fc/41d3c/91d11429059f4b553e0d0404f89fea059a108e1c3298e9427cf3a859d8d61ed2.png 490w,\n/static/1ba93982bb4513be5ea79cb90bb309fc/d30ee/91d11429059f4b553e0d0404f89fea059a108e1c3298e9427cf3a859d8d61ed2.png 980w,\n/static/1ba93982bb4513be5ea79cb90bb309fc/1134b/91d11429059f4b553e0d0404f89fea059a108e1c3298e9427cf3a859d8d61ed2.png 1470w,\n/static/1ba93982bb4513be5ea79cb90bb309fc/891d5/91d11429059f4b553e0d0404f89fea059a108e1c3298e9427cf3a859d8d61ed2.png 1520w\"\n        sizes=\"(max-width: 980px) 100vw, 980px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</li>\n<li>\n<p>到此为止，我还一行代码没写呢！现在终于开始了，7行以定义我要在数据库里存储的数据：</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Diode</span> <span class=\"token comment\"># 我要存的数据类型定义diode-二极管</span>\n  <span class=\"token directive function\">@model</span> <span class=\"token comment\"># 声明这是一个数据模型，下面的每个field都是二极管的数据列</span>\n  <span class=\"token directive function\">@auth</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">rules</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> <span class=\"token attr-name\">allow</span><span class=\"token punctuation\">:</span> <span class=\"token property\">owner</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\"># 这个数据模型只有登陆的用户是所有者的时候才可以被使用</span>\n  <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span> <span class=\"token comment\"># ID，感叹号指必须存在的值</span>\n  <span class=\"token attr-name\">state</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Boolean</span><span class=\"token operator\">!</span> <span class=\"token comment\"># 通/断布尔值</span>\n  <span class=\"token attr-name\">owner</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span> <span class=\"token comment\"># 所有者用户名</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"6\">\n<li>\n<p>数据定义好了，下面要创建数据库和API了，命令行运行<code class=\"language-text\">amplify push</code>然后方向键选择:</p>\n<ol>\n<li>“你确认要继续吗？继续的话会‘真的’创建云上资源” - “确认”；</li>\n<li>“你想要创建用于读取GraphQL API的代码吗？” - “Yes”，这一步Amplify工具链会根据上一步的数据模型，创建几个方便与API交互的文件；</li>\n<li>“使用什么语言创建文件？” - “javascript”</li>\n<li>“确认在这里创建文件吗？” - “确认”</li>\n<li>“确实想创建吗？” - “确认”</li>\n<li>“最大递归数？” - 默认值“2”，回车，这个暂时不用管，默认值就OK</li>\n<li>接下来，Amplify命令行工具将会创建所有辅助代码，并在AWS创建DynamoDB数据库和AppSync GraphQL API，要等个5分钟。</li>\n</ol>\n</li>\n<li>\n<p><code class=\"language-text\">npm i aws-amplify @aws-amplify/api @aws-amplify/auth @aws-amplify/core @aws-amplify/ui-react</code>安装完必要的包，然后就是第二个写代码的机会了！在<code class=\"language-text\">index.js</code>里添加代码：</p>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 省略一些React相关的import</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Amplify <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@aws-amplify/core\"</span> \n<span class=\"token keyword\">import</span> aws_exports <span class=\"token keyword\">from</span> <span class=\"token string\">\"./aws-exports\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Authenticator <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@aws-amplify/ui-react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 上面三行是新的import</span>\nAmplify<span class=\"token punctuation\">.</span><span class=\"token function\">configure</span><span class=\"token punctuation\">(</span>aws_exports<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 上一行是必须要添加的，用自动生成的设置文件`./aws-exports.js`来配置Amplify</span>\n\n<span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 本来就有</span>\nroot<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span> <span class=\"token comment\">// 本来就有</span>\n  <span class=\"token operator\">&lt;</span>Authenticator<span class=\"token operator\">></span>  <span class=\"token comment\">// 一行代码添加所有和用户登陆相关功能，比如用户登陆页面，创建账号页面等等</span>\n    <span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> signOut<span class=\"token punctuation\">,</span> user <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span> <span class=\"token comment\">// 将退出登陆回调函数和用户名传入App组件</span>\n      <span class=\"token operator\">&lt;</span>App signOut<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>signOut<span class=\"token punctuation\">}</span> user<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>  <span class=\"token comment\">// 传入App组件</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Authenticator<span class=\"token operator\">></span> <span class=\"token comment\">// 好吧，两行！</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"8\">\n<li>然后就是实现前端页面了，改动位于<code class=\"language-text\">App.js</code>，与<code class=\"language-text\">App.css</code>，改动后的文件见<a href=\"https://github.com/ZzzGin/diode/blob/main/src/App.js\">App.js</a>和<a href=\"https://github.com/ZzzGin/diode/blob/main/src/App.css\">App.css</a>：</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>turnedOn<span class=\"token punctuation\">,</span> setTurnedOn<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">API</span><span class=\"token punctuation\">.</span><span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token function\">graphqlOperation</span><span class=\"token punctuation\">(</span>updateDiode<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> turnedOn<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> <span class=\"token operator\">!</span>turnedOn<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>创建一个新的React State用于保存二极管的id和当前通断状态；一个<code class=\"language-text\">onClick</code>函数来切换二极管的通断，注意到，这里通过调用<code class=\"language-text\">API.graphql</code>来更新GraphQL数据库中的值。这一操作中<code class=\"language-text\">graphqlOperation</code>只是一个口袋的作用，把<code class=\"language-text\">updateDiode</code>，一个在6.2中创建的GraphQL语句模版，与<code class=\"language-text\">input</code>装在一起，传给<code class=\"language-text\">API.graphql</code>。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token constant\">API</span><span class=\"token punctuation\">.</span><span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token function\">graphqlOperation</span><span class=\"token punctuation\">(</span>listDiodes<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> diodes <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>listDiodes<span class=\"token punctuation\">.</span>items\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>diodes<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token constant\">API</span><span class=\"token punctuation\">.</span><span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token function\">graphqlOperation</span><span class=\"token punctuation\">(</span>createDiode<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setTurnedOn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>createDiode<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>createDiode<span class=\"token punctuation\">.</span>state\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">setTurnedOn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> diodes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span>diodes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>state\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>这个部分将会在页面加载的时候运行一次（通过react的useEffect Hook）。这个部分有一些回调地狱的味道了，不过anyway，总体逻辑就是先从数据库中读取属于该用户的二极管的状态和id；如果不存在，说明是该用户的首次登陆，那么通过createDiode来创建一个二极管；如果存在，则将读取的id和状态写入React State。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Auth<span class=\"token punctuation\">.</span><span class=\"token function\">currentAuthenticatedUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">API</span><span class=\"token punctuation\">.</span><span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token function\">graphqlOperation</span><span class=\"token punctuation\">(</span>onUpdateDiode<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">owner</span><span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>username <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">next</span><span class=\"token operator\">:</span> <span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setTurnedOn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>onUpdateDiode<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>onUpdateDiode<span class=\"token punctuation\">.</span>state\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>这一部分也是在页面初始化的时候调用，我们会通过相似的方式调用<code class=\"language-text\">onUpdateDiode</code>，这种带<code class=\"language-text\">on</code>的API调用会建立一个持续的链接，当数据库内的数据发生更新的时候，会主动把更新的值推送给我们的应用，以此实现“多屏协同”。</p>\n<ol start=\"9\">\n<li>好了，说来你可能不信，但是确实已经完成了！总计，90行代码不到。此时可以<code class=\"language-text\">npm run start</code>在本地测试代码。</li>\n<li>要部署这个代码，只需要commit后push到Github。然后前往AWS Amplify页面设置到App代码的branch即可。部署流水线也帮你准备完毕：</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 980px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fbae03f1fae1668166822c04fe3962cd/c367c/34dbd48fd6e8468ece71397b73bb2b3b09a4deda7c066117b207deec133ba8fc.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACVElEQVQoz42SSW/UQBCF/Xs5EBKSTIZIiEOCIkICA5N1omiCEOLEj+BAOOTILRIoy9hju2237fa+fKh7kgsnnvTULnXVc9Wrtg4nF3w8nnJ8dsHx5JzR4YTR4SmjgxPDvfdjPuj48Ix3B2fsjyeMjs4Zn0wZn04ZHV8w/XzE5Y99vn4ZYdVVQVXkPCJWGTf3NnVd07QtTdcuzrYx7PqOtmsNdQwddD1p2uKJBEuLtXVJ1/U0TUMkJTNnzsxxmdkOznyO7Tjcz2xEEKKyjFQpwzzPcMKYq98uf1zB3czGimSMjBPatqXre5RSRMIj8ByEEMw9j7nr4YvAiBRFQV4UZEVBVZXYYcr3a59rLzWNWGmqcD3fJGpIKXFnN3izG4TwzZ3nC2SSIOPYTPDIUEqSJKaKfQrpcXN7ixUnCVmWGbG+703R3PNxfWHEfCEM565LEC5G1lOY82F8efUNdfmJu18/sZIkJYyk8Y++J1EZTiCJ45g4TZFJSppX/A9s18cKw8iM1Had6TDLc9OxyhKKslzED3bkdYsqK2NPWVbmTudU1eKHtuNilWWJ9lEvxQhmOWmW0XedNoGmqU2sEeQNQlWoNDVCeqFZXpixFx2KxVLMlpvWiCqVESUpXpTgRgnzMDaCOi8IQuqqNt9SxlRlhbZM12nc2y7Wvz70+qEC+sm2D+cjun5RGCmFLQKarjYVjwijCGv4Yp/1jV02hnsMhm9ZWdthsLHL5uY+K89f82x5m6XlLZ4ub7GyumNyBsM91od7vBiOWBu8YWnwitXNbZ6svOQvuwJryhK/czwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"picture 18\"\n        title=\"picture 18\"\n        src=\"/static/fbae03f1fae1668166822c04fe3962cd/d30ee/34dbd48fd6e8468ece71397b73bb2b3b09a4deda7c066117b207deec133ba8fc.png\"\n        srcset=\"/static/fbae03f1fae1668166822c04fe3962cd/86a2e/34dbd48fd6e8468ece71397b73bb2b3b09a4deda7c066117b207deec133ba8fc.png 245w,\n/static/fbae03f1fae1668166822c04fe3962cd/41d3c/34dbd48fd6e8468ece71397b73bb2b3b09a4deda7c066117b207deec133ba8fc.png 490w,\n/static/fbae03f1fae1668166822c04fe3962cd/d30ee/34dbd48fd6e8468ece71397b73bb2b3b09a4deda7c066117b207deec133ba8fc.png 980w,\n/static/fbae03f1fae1668166822c04fe3962cd/c367c/34dbd48fd6e8468ece71397b73bb2b3b09a4deda7c066117b207deec133ba8fc.png 1349w\"\n        sizes=\"(max-width: 980px) 100vw, 980px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol start=\"11\">\n<li>当你拥有了部署流水线，未来你对页面做的修改，只需要本地测试以后，push到github，代码就会自动编译并部署到云端；</li>\n<li>此时，应用使用Amplify的默认URL，比如这样：<a href=\"https://main.d3pq3bg1mrhpp5.amplifyapp.com/\">main.d3pq3bg1mrhpp5.amplifyapp.com</a> 。我们需要自定义域名，通过鼠标点击网页上的“设置”来选择自己的域名，Amplify会为你自动生成证书。等待证书配置完成，<a href=\"https://diode.zzzgin.com/\">https://diode.zzzgin.com/</a> 正式上线！</li>\n</ol>\n<p>回顾一下上面的步骤，没有对于技术选择的纠结，没有配置的烦躁，一切行云如流水。回头看一下我们写的代码，没有一行是与业务逻辑不相关的，透彻！接下来，让我们再走近一些，看看这些步骤后面都发生了什么。</p>\n<h2 id=\"穷千里目\" style=\"position:relative;\"><a href=\"#%E7%A9%B7%E5%8D%83%E9%87%8C%E7%9B%AE\" aria-label=\"穷千里目 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>穷千里目</h2>\n<p>Todo: 简单从比较专业的角度介绍这个技术</p>\n<h2 id=\"求职建议\" style=\"position:relative;\"><a href=\"#%E6%B1%82%E8%81%8C%E5%BB%BA%E8%AE%AE\" aria-label=\"求职建议 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>求职建议</h2>\n<p>Todo: 展开</p>\n<ol>\n<li>这个开源项目是对于良好“技术品味”的初尝</li>\n<li>加速自己小想法的实现</li>\n<li>作为跳板，了解云服务，了解软件工程的关注点</li>\n</ol>\n<h2 id=\"drafting\" style=\"position:relative;\"><a href=\"#drafting\" aria-label=\"drafting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Drafting</h2>\n<p><a href=\"https://aws.amazon.com/amplify/\">AWS Amplify</a>是亚马逊云2018年推出，且当下正在蓬勃发展的<a href=\"https://github.com/aws-amplify/amplify-js\">开源项目</a>。实质上是一个加速后端搭建并交互各种常见前端的<strong>全栈</strong>框架。它提供了命令行工具链，用以快速地创建后端设施并创建配置模版文件；它维护了一组前端库，方便各种前端与其创建的后端设施进行交互；它还原生提供了前端组件，方便一些常用需求（比如Authentication）的UI创建；最后，它还提供了项目的building和hosting的方案，一行命令部署上线，实现<a href=\"https://www.redhat.com/en/topics/devops/what-is-ci-cd\">CI/CD</a>。</p>\n<p>作为一个<a href=\"https://www.hitechnectar.com/blogs/top-14-backend-as-a-service-providers/\">“后端即服务(BaaS)”</a>解决方案，Amplify支持的前端框架基本涵盖了我个人目力之所及。应用于Web，它提供了对React、Angular、Vue等的支持；应用于native，它也支持iOS、Andriod原生开发。除此以外，笔者执笔之时，已距离我过去的Amplify使用经验一年有余，再次打开<a href=\"https://docs.amplify.aws/start/\">它的文档</a>（下图），挠头于“当时确实只有4、5个选项吧。”开源社区其活跃的程度，可见一斑。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 741px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2b916888117d7c650e4d16ab8f1f41fc/13e20/f3b5ce785ada9cbfb7a9e596b867c58f5c754e0ede3dfb6fe1af961172842a16.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.32653061224491%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACWUlEQVQ4y21TW08TQRQeE5X4I1BfTJQXf5c/SAyXRzBCQsKLDyr65pMxNCBQaKkVLNXSpXRnd3bunzlnL60Jk3x7LnPuc1bEFYG4toC4/ghx9QHiskB8PQNIXp5R5ulu5R7i2kOw/+p9xPUFxDcCAlvPgZ2XJbaXgLdPZth8jLixCGwsMq3B8rtniFsvZnR7CXHzKYQ1BVSWIs9SEK91AaVyFIWCdxaIAbECKjAfHBDsHCVbD9G/vML+jzZOzs5x0unh6LTLIF4VGnRiBCIqzPN3QFyPE7S7PZxfDNH/PUSvf4HTbg/tTg8/f10ixtK0puWJVeQ5XSULMvTew8kreJPBhwhjDOu08wixDMZ2IWIgC7gQGl0MAS7LG1kETmKBr6+AmwN4AN4Zzvs5MZi4CHgP7xxsiPgymED7yDLZhmmKPzu7CFSUc2WFSilcdveRjEfwlNFarrAz+Iui4kMIkFmO1uERjLXsTNVLKdE9bsM6VwakDxkmkwzTVEJrzSiKAul0yslIpjFkWY7R8LrREfJcIc1VoxPBB57p3lkLYyWZ5+xUkZSoZxx9gIwa77MWVDBAKB9DyhR7nz42foKM6QySMbS1HIgujLHo9PrQ1QPR8BOZ4sPxd9zIlF+UkhVao3VwyDGstRD0oVKzdIpirhVumxe8aGSjDZz20NrAWsNjYN985ieoItqloyFwq8DbTknoHOaAop+jepRyA+tdRLMqNU9H1IYnFylyXQanlsng2/kVMm0rnf8vSB1gPhjvYd3y7SThf7guXakC16MR8jzn1poK5wLehX9Bb10th8XNCQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"官网中支持的前端技术\"\n        title=\"官网中支持的前端技术\"\n        src=\"/static/2b916888117d7c650e4d16ab8f1f41fc/13e20/f3b5ce785ada9cbfb7a9e596b867c58f5c754e0ede3dfb6fe1af961172842a16.png\"\n        srcset=\"/static/2b916888117d7c650e4d16ab8f1f41fc/86a2e/f3b5ce785ada9cbfb7a9e596b867c58f5c754e0ede3dfb6fe1af961172842a16.png 245w,\n/static/2b916888117d7c650e4d16ab8f1f41fc/41d3c/f3b5ce785ada9cbfb7a9e596b867c58f5c754e0ede3dfb6fe1af961172842a16.png 490w,\n/static/2b916888117d7c650e4d16ab8f1f41fc/13e20/f3b5ce785ada9cbfb7a9e596b867c58f5c754e0ede3dfb6fe1af961172842a16.png 741w\"\n        sizes=\"(max-width: 741px) 100vw, 741px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>OK，<a href=\"https://zhuanlan.zhihu.com/p/382399510?ivk_sa=1024320u#:~:text=%E8%83%86%E5%AD%90%E4%BD%A0%E6%98%AF%E6%9C%89%E7%9A%84%EF%BC%8C%E6%9C%AC%E4%BA%8B%E5%91%A2%EF%BC%8C%E6%88%91%E5%87%AD%E4%BB%80%E4%B9%88%E7%9B%B8%E4%BF%A1%E4%BD%A0%E8%83%BD%E5%89%BF%E4%BA%86%E5%BC%A0%E9%BA%BB%E5%AD%90\">前端，你是有的。后端呢？我凭什么相信（停顿）你能剿了“全栈”？</a>。</p>\n<p>Amplify对后端的管理是对于<a href=\"https://docs.aws.amazon.com/whitepapers/latest/introduction-devops-aws/infrastructure-as-code.html\">AWS Infrastructure as Code(IoC)理念</a>的一层从功能出发的抽象。简单说，当你上手AWS上眼花缭乱的服务的时候（下图），官方的教程通常是让你去AWS的控制台，也就是在网站上使用鼠标点击完成服务的创建和使用。而在实际工程中，一个应用需要你如同组合乐高积木一样组合多个AWS服务，其中涉及了大量的配置，自动化就显得格为重要。于是AWS提供了<a href=\"https://aws.amazon.com/cloudformation/\">Cloud Formation</a>，一种描述性的模版，来定义你需要的后端设施。你可以理解为你是乐高的设计师，你设计了一个房子，其中“地板”需要2*16的棕色积木，编号是“b-772”（我不玩乐高，我瞎编的），32个，逐行错开排拼在第一层。于是，你只需要制作说明书，把上面的信息记下，玩家（AWS）就能按照你的说明书（模版）搭建房子（应用）。用“模版（代码）”定义后端的设施，便是IoC。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 980px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d68e1cfd6cfea57e839bf2c2b7560cbc/d2775/03af09d2960fe4664e84ee5a1bf9b60b0875bc5d7b504ec1a81845fdd85e37a0.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.244897959183675%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVQoz13P25LSUBSE4bz/I3npjE6pHBRhYKBMOCUBQkKyz3sn5LcMllpefNXrrntFyXYny7JCCtULqdDGIKVCKY1UCusc3nu235ZUeQHhTt/1dO2dtu3+6AZ3ory4SOk0OrjeGo3zHhc8PvjhDiHgneft25I033Kuj+S3A7Uq0UagdDOk1DU3VREdv2TyNDpxmpz78+LKaSMo9wJda5SwyMbS3AzP+ynv0zEfsilP6ZhltSORF36IE7E486POycSF6Dx6k/U+w2Vl7xuF1wYnHhl+L3TOsZ3HZPMdxTrjss44rVPy1X6QLnfkuxxRCaJVMpJJc0DT9S0Q+n/cH3wInKcv1JMPyPln1OwjId7gswp/KOjSiu7aEKQmks/vpB1/wk9HvVvN8NURX/4VbhlOCSbrI6O3lFlSsIiv5IXi0ihu1qJ9i7YBYzyRSaYyxF+w8bi32xluP3/Y/c7DK/a04zx/47rJuSUXyn1DXVhUY7HaYaTDKIfRjui4mMnz6juuzPrOKlpnaHv+6ADvA6dNjJU3ut4P2i7QtoHwn+jppZDLteBaur6qLFJYtHow2g6tTW24Tjb4ryva2Yb2NeYep3SbPeFS0kpFaCRBSKLF4iqXq4b1RvXJziCax3T96xXjB6IxJGlCVh/IbkeyOh1cZYEwgkbXA2UVPwH+zPKJIisMfgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"浩如烟海的AWS服务\"\n        title=\"浩如烟海的AWS服务\"\n        src=\"/static/d68e1cfd6cfea57e839bf2c2b7560cbc/d30ee/03af09d2960fe4664e84ee5a1bf9b60b0875bc5d7b504ec1a81845fdd85e37a0.png\"\n        srcset=\"/static/d68e1cfd6cfea57e839bf2c2b7560cbc/86a2e/03af09d2960fe4664e84ee5a1bf9b60b0875bc5d7b504ec1a81845fdd85e37a0.png 245w,\n/static/d68e1cfd6cfea57e839bf2c2b7560cbc/41d3c/03af09d2960fe4664e84ee5a1bf9b60b0875bc5d7b504ec1a81845fdd85e37a0.png 490w,\n/static/d68e1cfd6cfea57e839bf2c2b7560cbc/d30ee/03af09d2960fe4664e84ee5a1bf9b60b0875bc5d7b504ec1a81845fdd85e37a0.png 980w,\n/static/d68e1cfd6cfea57e839bf2c2b7560cbc/1134b/03af09d2960fe4664e84ee5a1bf9b60b0875bc5d7b504ec1a81845fdd85e37a0.png 1470w,\n/static/d68e1cfd6cfea57e839bf2c2b7560cbc/555cf/03af09d2960fe4664e84ee5a1bf9b60b0875bc5d7b504ec1a81845fdd85e37a0.png 1960w,\n/static/d68e1cfd6cfea57e839bf2c2b7560cbc/d2775/03af09d2960fe4664e84ee5a1bf9b60b0875bc5d7b504ec1a81845fdd85e37a0.png 5578w\"\n        sizes=\"(max-width: 980px) 100vw, 980px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Amplify则更进一步，它做的工作是“设计常见的模块说明书以方便其他乐高设计师”。依然用上面的例子，拥有了Amplify，你的说明书将可以从“32个棕色的b-277逐行错开拼在第一层”简化成“棕色地板:32*32的面积”。怎么拼，以及积木标号，都被抽象成了“地板”这个名词，随Amplify设计去吧，我们只关心这里需要的是地板就足够了！</p>\n<p>有了这样的概念，我们便可以理解Amplify在后端的构建上实质是通过一定程度上牺牲灵活性，以换取便利度，方便新手入门AWS、或老手构建“常见需求”和”复杂项目的Demo“。幸运的是，AWS在设计Amplify的时候，事实上依然保留了相当的灵活性，Amplify应用可以作为一个组件，嵌在复杂的项目当中并<a href=\"https://github.com/ZzzGin/cold-start-severless-backend-cdk\">发挥一定作用</a>。当然那就是后话了。</p>\n<p>正如这篇blog标题所讲的，Amplify是AWS这个手游的新手大礼包。相当合适的学习成本，你就能上手一众AWS的明星产品。从新手的角度来说，”大礼包“功能强大，能迅速拉开与不充值玩家实力的差距；而对于老玩家，”大礼包“也物超所值，你会发现总有一些小东西，用Amplify实现能做得很漂亮，很方便。而怎么拉开差距，怎么漂亮，怎么方便，且听我下面慢慢道来。</p>\n<table>\n<thead>\n<tr>\n<th>底层需求</th>\n<th>比如</th>\n<th>Amplify提供方便了吗</th>\n<th>AWS提供了吗</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>数据存储</td>\n<td>商品信息/博客文章/数据表怎么存？存在哪儿？</td>\n<td>是</td>\n<td>AppSync (DynamoDB/Aurora/AES)</td>\n</tr>\n<tr>\n<td>数据同步</td>\n<td>微信聊天，我发消息如何<strong>同步</strong>给其他用户？</td>\n<td>是</td>\n<td>AppSync (DynamoDB)</td>\n</tr>\n<tr>\n<td>数据搜索</td>\n<td>搜索框输入商品名，索引提供结果。怎么<strong>索引</strong>？</td>\n<td>是</td>\n<td>AppSync (AES)</td>\n</tr>\n<tr>\n<td>文件存储</td>\n<td>用户上传的照片，怎么存？存在哪儿？</td>\n<td>是</td>\n<td>S3</td>\n</tr>\n<tr>\n<td>逻辑控制与计算</td>\n<td>我想自定义API功能</td>\n<td>是</td>\n<td>Appsync/API Gateway (Lambda/ECS/EC2)</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>中层需求</th>\n<th>比如</th>\n<th>Amplify提供方便了吗</th>\n<th>AWS提供了吗</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>CI/CD 持续开发持续部署</td>\n<td>我push了代码，希望构建-测试-部署自动化</td>\n<td>是</td>\n<td>CodeCommit, CodePipeline</td>\n</tr>\n<tr>\n<td>IaC 设施即代码</td>\n<td>我想自动化设施搭建</td>\n<td>是</td>\n<td>CDK, CF</td>\n</tr>\n<tr>\n<td>Availability 可用性</td>\n<td>服务的提供会因为各种原因中断吗？</td>\n<td>是</td>\n<td>AWS的立身之本</td>\n</tr>\n<tr>\n<td>Scalability 伸缩性</td>\n<td>今天就10个用户，未来10万用户的时候我不希望重构</td>\n<td>是</td>\n<td>带无服务(Serverless)属性的服务都具备</td>\n</tr>\n<tr>\n<td>Durability 耐受性</td>\n<td>墨菲定律，但是最坏情况下，我不希望数据丢失</td>\n<td>是</td>\n<td>带无服务(Serverless)属性的服务都具备</td>\n</tr>\n<tr>\n<td>内部安全认证</td>\n<td>只有我自己的Lambda才能调用我的ES</td>\n<td>否（据我所知）</td>\n<td></td>\n</tr>\n<tr>\n<td>DNS与认证</td>\n<td>用户如何抵达我的网站，并认证我的网站的真实性？</td>\n<td>部分</td>\n<td>Certificate Manager, Route 53</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th>高层需求</th>\n<th>比如</th>\n<th>Amplify提供方便了吗</th>\n<th>AWS Provider</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>用户认证</td>\n<td>用户注册、登陆</td>\n<td>是</td>\n<td>Cognito</td>\n</tr>\n<tr>\n<td>用户行为分析</td>\n<td>用户从哪儿来，到哪儿去，家里几口人，共有几亩地</td>\n<td>是</td>\n<td>Pinpoint</td>\n</tr>\n<tr>\n<td>消息推送</td>\n<td>你中奖了</td>\n<td>是</td>\n<td>SNS, SMS, Pinpoint</td>\n</tr>\n<tr>\n<td>流数据</td>\n<td>直播</td>\n<td>否</td>\n<td>Firehose</td>\n</tr>\n<tr>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n<td>...</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"more-readings\" style=\"position:relative;\"><a href=\"#more-readings\" aria-label=\"more readings permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>More readings</h2>\n<ol>\n<li><a href=\"https://github.com/dabit3/awesome-aws-amplify\">awesome-aws-amplify</a></li>\n<li></li>\n</ol>","frontmatter":{"date":"May 19, 2022","path":"/blogs/why-you-really-need-to-know-amplify","tags":["blog","checkout dash b","ng project","aws","amplify"],"title":"AWS的新手大礼包——Amplify","description":"Amplify是一个非常有活力的社区。在我看来，作为毕业生且面向软件工程师找工作的你，如果没有接触过它，尝试它会有非常新奇的体验。这种体验既可以帮助你构建作为软件工程师的‘品味’；又可以‘加速’你奇思妙想的实现；最关键的是它可以带动你去了解当下工业界的一些流行的解决方案……"}}},"pageContext":{"prev":{"frontmatter":{"path":"/blogs/english-lavendar-care","tags":["blog","plant care","english lavender"]}},"next":{"frontmatter":{"path":"/blogs/backlogs","tags":["blog","backlog"]}}}},
    "staticQueryHashes": []}